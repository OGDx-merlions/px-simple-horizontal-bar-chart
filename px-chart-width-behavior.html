<script>
/*
    Behavior to define the width and height of an SVG chart
    Incoming `width` and `height` attributes may be defined as:
    Number, Number as String, or "auto". Numbers will be coerced into String
    Depends on local method this._drawChart
    Defines default values which may be overridden in parent chart element
*/

var defaultWidth = '283';
var defaultHeight = '150';

var pxChartDimensionsBehavior = {

    properties: {
        /**
        * width
        *
        * Format: String
        */
        width: {
            type: String,
            observer: '_drawChart',
            value: defaultWidth
        },
        /**
        * height
        *
        * Format: String
        */
        height: {
            type: String,
            observer: '_drawChart',
            value: defaultHeight
        }
    },

    _reconcileWidth: function(value) {
        return this._reconcileDimensionValue(value, defaultWidth, 'width');
    },

    _reconcileHeight: function(value) {
        return this._reconcileDimensionValue(value, defaultHeight, 'height');
    },

    _reconcileDimensionValue: function(value, defaultValue, type) {
        switch(value) {
            case '':
            case false:
            case undefined:
                return defaultValue;
                break;
            case 'false':
                return false;
                break;
            case 'auto':
                return this._getAutoValue(type);
                break;
            default:
                if(px.isFloat(value)) {
                    return parseFloat(value);
                } else if(px.isInt(value)) {
                    return parseInt(value);
                } else {
                    return value;
                };
                break;
        };
    },

    _getAutoValue: function(type) {
        var parent = this.parentNode;
        var padding = this._getElementPadding(parent);
        if(type === 'width') {
            return parseInt(parent.clientWidth - padding.left - padding.right);
        } else if(type === 'height') {
            return parseInt(parent.clientHeight - padding.top - padding.bottom);
        }
    },

    _getElementPadding: function(el) {
        var style = window.getComputedStyle(el, null);
        return {
            top: style.getPropertyValue('padding-top').split('px')[0],
            right: style.getPropertyValue('padding-right').split('px')[0],
            bottom: style.getPropertyValue('padding-bottom').split('px')[0],
            left: style.getPropertyValue('padding-left').split('px')[0]
        };
    }

};

</script>
